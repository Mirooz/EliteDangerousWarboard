<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.Group?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="be.mirooz.elitedangerous.dashboard.controller.ui.component.exploration.SystemVisualViewComponent"
      spacing="0" styleClass="exploration-visual-view" VBox.vgrow="ALWAYS">

    <Label text="VUE VISUELLE DU SYSTÈME" styleClass="exploration-section-title" />
    
    <!-- Conteneur principal : Panneau gauche + Vue visuelle + Panneau JSON latéral -->
    <HBox spacing="10" VBox.vgrow="ALWAYS">
        <!-- Panneau gauche : Liste des corps du système -->
        <VBox fx:id="bodiesListPanel" styleClass="exploration-bodies-list-panel" 
              minWidth="450" maxWidth="450" HBox.hgrow="NEVER" VBox.vgrow="ALWAYS">
            <Label text="CORPS DU SYSTÈME" styleClass="exploration-section-title"/>
            <CheckBox fx:id="showOnlyHighValueBodiesCheckBox" text="Show only high value bodies" 
                      styleClass="exploration-filter-checkbox" 
                      onAction="#onFilterChanged"/>
            <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" 
                        styleClass="exploration-bodies-list-scroll" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                <VBox fx:id="bodiesListContainer" spacing="5" styleClass="exploration-bodies-list-container"/>
            </ScrollPane>
        </VBox>
        
        <!-- Zone d'affichage des corps célestes -->
        <ScrollPane fx:id="bodiesScrollPane" styleClass="exploration-visual-scroll" 
                    fitToWidth="false" fitToHeight="false" HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS"
                    minWidth="500" minHeight="300" prefWidth="800" prefHeight="450"
                    hbarPolicy="NEVER" vbarPolicy="NEVER">
            <Group fx:id="bodiesGroup">
                <Pane fx:id="bodiesPane" styleClass="exploration-visual-pane" 
                      minWidth="500" minHeight="300" prefWidth="800" prefHeight="450"
                      maxWidth="800" maxHeight="600"/>
            </Group>
        </ScrollPane>
        
        <!-- Panneau JSON latéral (caché par défaut) -->
        <VBox fx:id="jsonDetailPanel" styleClass="exploration-json-panel" 
              visible="false" managed="false" minWidth="400" maxWidth="500"
              HBox.hgrow="NEVER" VBox.vgrow="ALWAYS">
            <!-- En-tête avec titre et bouton fermer -->
            <HBox spacing="10" alignment="CENTER_LEFT" styleClass="exploration-json-header">
                <Label fx:id="jsonBodyNameLabel" text="Détails JSON" styleClass="exploration-json-title" HBox.hgrow="ALWAYS"/>
                <Button fx:id="closeJsonPanelButton" text="✕" styleClass="exploration-json-close-button" 
                        onAction="#closeJsonPanel"/>
            </HBox>
            
            <!-- TreeView pour afficher le JSON de manière hiérarchique -->
            <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" 
                        styleClass="exploration-json-scroll" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                <TreeView fx:id="jsonTreeView" styleClass="exploration-json-tree" 
                          showRoot="true" VBox.vgrow="ALWAYS"/>
            </ScrollPane>
        </VBox>
    </HBox>
</VBox>

